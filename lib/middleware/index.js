import{log as a}from"../logger";import c from"dayjs";const i=({status:o,code:s,message:n,data:e})=>({status:o,code:s||"",message:n||"",data:e}),f=(o,s,n)=>{s.ok=e=>{s.json(i({status:200,message:"ok",data:e}))},s.fail=({status:e,code:r,message:t})=>{e=e!=null?e:500,!t&&e===500&&(t="unknow server internal error"),s.status(e).json(i({status:e,code:r,message:t}))},n()},m=["js/","css/","img/","static/","_nuxt","manifest.json"],x=(o,s,n)=>{if(m.some(r=>o.originalUrl.includes(r))||o.method==="HEAD")return n();const e=c().format("YYYY-MM-DD HH:mm:ss");a({level:"request",message:`${e} ${o.method} ${o.originalUrl}`}),n()};function F(o,s,n){o.originalUrl==="/"&&s.set("Cache-control","no-store"),n()}export{F as disableCaching,m as ignoreRequestStrings,i as resFormat,x as routeLog,f as sendResponse};
