"use strict";var b=Object.create;var t=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var L=(e,o)=>{for(var s in o)t(e,s,{get:o[s],enumerable:!0})},c=(e,o,s,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of R(o))!y.call(e,r)&&r!==s&&t(e,r,{get:()=>o[r],enumerable:!(n=x(o,r))||n.enumerable});return e};var l=(e,o,s)=>(s=e!=null?b(v(e)):{},c(o||!e||!e.__esModule?t(s,"default",{value:e,enumerable:!0}):s,e)),F=e=>c(t({},"__esModule",{value:!0}),e);var E={};L(E,{disableCaching:()=>w,ignoreRequestStrings:()=>d,resFormat:()=>g,routeLog:()=>q,sendResponse:()=>Y});module.exports=F(E);var m=l(require("signale")),p=l(require("dayjs")),i=new m.default.Signale({scope:"WebCrate",logLevel:process.env.LOG_LEVEL||"info",types:{success:{badge:"\u2705",color:"green",label:"success",logLevel:"debug"},info:{badge:"\u2139\uFE0F",color:"blue",label:"info",logLevel:"debug"},request:{badge:"\u{1F4EB}",color:"gray",label:"request",logLevel:"debug"},debug:{badge:"\u{1F537}",color:"cyan",label:"debug",logLevel:"info"},warn:{badge:"\u26A0\uFE0F",color:"yellow",label:"warn",logLevel:"info"}}}),f=({level:e,message:o})=>{if(Reflect.has(i,e)){let s=i[e];s({prefix:`[${(0,p.default)().format("YYYY-MM-DD HH:mm:ss")}]`,message:o,suffix:"(@klauscfhq)"});return}i.warn(`Invalid log level: ${e}`)};var u=l(require("dayjs")),g=({status:e,code:o,message:s,data:n})=>({status:e,code:o||"",message:s||"",data:n}),Y=(e,o,s)=>{o.ok=n=>{o.json(g({status:200,message:"ok",data:n}))},o.fail=({status:n,code:r,message:a})=>{n=n!=null?n:500,!a&&n===500&&(a="unknow server internal error"),o.status(n).json(g({status:n,code:r,message:a}))},s()},d=["js/","css/","img/","static/","_nuxt","manifest.json"];function q(e,o,s){if(d.some(r=>e.originalUrl.includes(r))||e.method==="HEAD")return s();let n=(0,u.default)().format("YYYY-MM-DD HH:mm:ss");f({level:"request",message:`${n} ${e.method} ${e.originalUrl}`}),s()}function w(e,o,s){e.originalUrl==="/"&&o.set("Cache-control","no-store"),s()}
